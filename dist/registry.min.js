!function(n,o){"object"==typeof exports&&"undefined"!=typeof module?module.exports=o():"function"==typeof define&&define.amd?define(o):(n="undefined"!=typeof globalThis?globalThis:n||self).Registry=o()}(this,function(){"use strict";function n(n){return JSON.stringify(n)}function o(n){return JSON.parse(n)}function t(n){let o="";return o=null==n||""===n?function(){if("undefined"==typeof window||void 0===window.location)return console.warn("window or window.location is not available. Cannot determine root URL dynamically."),"unknown";if(window.location.origin&&"null"!==window.location.origin)return window.location.origin;const n=window.location.protocol,o=window.location.hostname,t=window.location.port,e="string"==typeof n&&n.length>0,r="string"==typeof o&&o.length>0;if(e&&"file:"===n)return console.warn("Detected 'file://' protocol. No standard web origin is available, returning 'unknown'."),"unknown";if(e&&r)return`${n}//${o}${t?`:${t}`:""}`;return console.warn("Could not determine root URL from window.location properties."),"unknown"}():"@"+n,function(n){if("function"==typeof btoa)return btoa(n);if("undefined"!=typeof Buffer)return Buffer.from(n).toString("base64");throw new Error("Base64 encoding not supported in this environment")}(o)}function e(n,o){return n+o}function r(n){return n+"&&expires"}function i(n){if(function(n){const o=r(n),t=localStorage.getItem(o);if(null===t)return!1;const e=parseInt(t,10);return Math.floor(Date.now()/1e3)>=e}(n))return l(n),null;const t=localStorage.getItem(n);if(null===t)return null;try{return o(t)}catch(n){return console.error("Error parsing stored value:",n),null}}function l(n){localStorage.removeItem(n);const o=r(n);localStorage.removeItem(o)}class u{constructor(u){const c=t(u);this.set=function(o,t,i){const l=e(o,c),u=function(o,t){if(null==o)return"__NULL__";const e=n(o),r=t.length,i=[];for(let n=0;n<e.length;n++){const o=n%r,l=e.charCodeAt(n)+t.charCodeAt(o);i.push(l)}return n(i)}(t,o);!function(o,t,e){if(localStorage.setItem(o,n(t)),"number"==typeof e){const n=r(o),t=Math.floor(Date.now()/1e3)+e;localStorage.setItem(n,t.toString())}}(l,u,i)},this.get=function(n){const t=i(e(n,c));if(null===t)return null;if("__NULL__"===t)return null;try{return function(n,t){if("__NULL__"===n)return null;try{const e=o(n),r=t.length,i=[];for(let n=0;n<e.length;n++){const o=n%r,l=e[n]-t.charCodeAt(o);i.push(l)}let l="";for(let n=0;n<i.length;n++)l+=String.fromCharCode(i[n]);return o(l)}catch(n){return console.error("Error decrypting value:",n),null}}(t,n)}catch(n){return console.error("Error decrypting value:",n),null}},this.remove=function(n){l(e(n,c))},this.empty=function(){!function(n){const o=Object.keys(localStorage);for(let t=0;t<o.length;t++){const e=o[t];e.indexOf(n)>-1&&localStorage.removeItem(e)}}(c)}}}return"undefined"!=typeof module&&void 0!==module.exports?module.exports=u:"function"==typeof define&&define.amd?define([],function(){return u}):"undefined"!=typeof window&&(window.Registry=u),u});
